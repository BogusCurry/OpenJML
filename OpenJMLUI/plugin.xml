<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
        <!-- TODO: Things to be done:
                - get RAC decorator working
                - fix the enablement of the remaining popup menu items
                - define a submenu for the popup menu items
                - look into using org.eclipse.ui.menus, which has
                replaced the menchanisms used here, since 3.3
                - there are a bunch of FIXMEs
          -->
          
  <!-- This defines a builder used to do JML checking as part of the
		Eclipse compilation process.  The unqualified id appears
		to be implicitly prefixed by the plugin id as defined in
		the Activator and in the manifest.
		-->
  <extension
         id="JMLBuilder"
         name="JML Builder"
         point="org.eclipse.core.resources.builders">
    <builder
            hasNature="true">
      <run class="org.jmlspecs.openjml.eclipse.JMLBuilder"/>
    </builder>
  </extension>
   
  <!-- An Eclipse Nature that designates a Java project as one to
   	which JML tools can be applied.  It also controls the builder.
   	The unqualified id appears
    to be implicitly prefixed by the plugin id as defined in
    the Activator and in the manifest.
  -->
  <extension
         id="JMLNatureID"
         name="JML Nature"
         point="org.eclipse.core.resources.natures">
    <requires-nature id="org.eclipse.jdt.core.javanature"/>
    <runtime>
      <run class="org.jmlspecs.openjml.eclipse.JMLNature"/>
    </runtime>
    <builder
            id="org.jmlspecs.OpenJMLUI.JMLBuilder">
    </builder>
    <!-- FIXME - what about parameter or content-type ? -->
  </extension>
   
  <!-- This decorator is applied to Java projects to indicate whether
	they have a JML Nature (with decorator) or not (no decorator).
	NOTE: Per the code in PopupActions.java the decorator id must
	be PLUGIN_ID + ".JMLDecorator"
	-->
  <extension
         point="org.eclipse.ui.decorators">
    <decorator
            lightweight="true"
            location="TOP_RIGHT"
            label="JML"
            icon="icons/JMLSmall.png"
            state="true"
            id="org.jmlspecs.OpenJMLUI.JMLDecoration">
       <description>
            JML nature is enabled for this project
       </description>
       <enablement>
        	<and>
                <objectState name="nature" value="org.jmlspecs.OpenJMLUI.JMLNatureID"/>
                <objectClass name="org.eclipse.jdt.core.IJavaProject"/> 
             </and>
       </enablement>
    </decorator>
  </extension>

<!-- This extension adds the preference page -->
   <extension
         id="org.jmlspecs.eclipse.preferencesPage"
         name="JML Preferences"
         point="org.eclipse.ui.preferencePages">
      <page 
         id="org.jmlspecs.eclipse.preferences.JML" 
         name="JML" 
         class="org.jmlspecs.openjml.eclipse.Preferences"
         category="org.eclipse.jdt.ui.preferences.JavaBasePreferencePage"> 
      </page>
   </extension>
   
  <!-- The following set of extensions add various menu items to the
  	popup menus that appear when right-clicking on items in the
  	Package Explorer. They appear in the UI in reverse order of how they are
  	listed here.
  	 -->
  <extension
         point="org.eclipse.ui.popupMenus">
    <objectContribution
            adaptable="true"
            objectClass="java.lang.Object"
            nameFilter="*"
            id="JMLUI.container">
            <!-- The items in this first objectContribution need more specific enablements -->
       <action
               label="Clear for RAC"
               class="org.jmlspecs.openjml.eclipse.PopupActions$ClearForRAC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.clearForRAC">
       </action>
       <action
               label="Disable for RAC"
               class="org.jmlspecs.openjml.eclipse.PopupActions$DisableForRAC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.disableForRAC">
       </action>
       <action
               label="Mark for RAC"
               class="org.jmlspecs.openjml.eclipse.PopupActions$EnableForRAC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.enableForRAC">
       </action>
       <action
               label="Generate JML doc pages"
               class="org.jmlspecs.openjml.eclipse.PopupActions$JmlDoc"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.jmldocAction">
       </action>
       <action
               label="Show JML classpath"
               class="org.jmlspecs.openjml.eclipse.PopupActions$ClassPath"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.classpathAction">
       </action>
       <action
               label="Edit JML specs path"
               class="org.jmlspecs.openjml.eclipse.PopupActions$SpecsPath"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.specspathAction">
       </action>
       <action
               label="Add to JML specs path"
               class="org.jmlspecs.openjml.eclipse.PopupActions$AddToSpecsPath"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.addspecspathAction">
       </action>
       <action
               label="Remove from JML specs path"
               class="org.jmlspecs.openjml.eclipse.PopupActions$RemoveFromSpecsPath"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.removespecspathAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IJavaProject"
            nameFilter="*"
            id="JMLUI.contribution1">
       <action
               label="Disable Auto JML Checking"
               class="org.jmlspecs.openjml.eclipse.PopupActions$DisableNature"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.removeNatureAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution1WS">
       <action
               label="Disable Auto JML Checking"
               class="org.jmlspecs.openjml.eclipse.PopupActions$DisableNature"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.removeNatureActionWS">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IJavaProject"
            nameFilter="*"
            id="JMLUI.contribution2">
       <action
               label="Enable Auto JML Checking"
               class="org.jmlspecs.openjml.eclipse.PopupActions$EnableNature"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.addNatureAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution2WS">
       <action
               label="Enable Auto JML Checking"
               class="org.jmlspecs.openjml.eclipse.PopupActions$EnableNature"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.addNatureActionWS">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IMethod"
            nameFilter="*"
            id="JMLUI.contribution3K">
       <action
               label="Show JML proof information"
               class="org.jmlspecs.openjml.eclipse.PopupActions$ProofInformation"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.showProofInformation">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IJavaElement"
            nameFilter="*"
            id="JMLUI.contribution3">
       <action
               label="Show JML specifications"
               class="org.jmlspecs.openjml.eclipse.PopupActions$ShowSpecs"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.showSpecsAction1">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.core.resources.IResource"
            nameFilter="*"
            id="JMLUI.contribution4">
       <action
               label="Delete JML markers"
               class="org.jmlspecs.openjml.eclipse.PopupActions$DeleteMarkers"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.deleteMarkerAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.core.resources.IResource"
            nameFilter="*"
            id="JMLUI.contributionE">
       <action
               label="Open Specs Editor"
               class="org.jmlspecs.openjml.eclipse.PopupActions$SpecsEditor"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.specsEditor">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution4WS">
       <action
               label="Delete JML markers"
               class="org.jmlspecs.openjml.eclipse.PopupActions$DeleteMarkers"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.deleteMarkerActionWS">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.core.resources.IResource"
            nameFilter="*"
            id="JMLUI.contribution5">
       <action
               label="Compile RAC"
               class="org.jmlspecs.openjml.eclipse.PopupActions$RAC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkRACAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution5WS">
       <action
               label="Compile RAC"
               class="org.jmlspecs.openjml.eclipse.PopupActions$RAC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkRACActionWS">
       </action>
    </objectContribution>
  </extension>
  <!--  FIXME - something like this would simplify this file. 
  <extension
         point="org.eclipse.ui.popupMenus">
    <objectContribution
            adaptable="true"
            nameFilter="*"
            id="JMLUI.contribution6M">
       <action
               label="Static checks"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckESC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkESCActionM">
          <enablement>
                <or>
                <objectClass name="org.eclipse.jdt.core.IMethod"/> 
                <objectClass name="org.eclipse.jdt.core.IType"/> 
                <objectClass name="org.eclipse.jdt.core.IResource"/> 
                <objectClass name="org.eclipse.jdt.core.IWorkingSet"/> 
             </or>
       </enablement>
       </action>
    </objectContribution>
  </extension>
  -->
  <extension
         point="org.eclipse.ui.popupMenus">
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IMethod"
            nameFilter="*"
            id="JMLUI.contribution6M">
       <action
               label="Static JML checks"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckESC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkESCActionM">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.jdt.core.IType"
            nameFilter="*"
            id="JMLUI.contribution6T">
       <action
               label="Static JML checks"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckESC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkESCActionT">
       </action>
    </objectContribution>
  </extension>
  <!-- An IType adapts to be the containing IResource; adaptable is set false,
  otherwise a Class in the PackageNavigator will have two entries in its popup
  menu. But I wonder what other things that would adapt to be an IResource are
  thereby not enabled.  This could be smarter - FIXME.  -->
  <extension
         point="org.eclipse.ui.popupMenus">
    <objectContribution
            adaptable="false"
            objectClass="org.eclipse.core.resources.IResource"
            nameFilter="*"
            id="JMLUI.contribution6">
       <action
               label="Static JML checks"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckESC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkESCAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution6WS">
       <action
               label="Static JML checks"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckESC"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkESCActionWS">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.core.resources.IResource"
            nameFilter="*"
            id="JMLUI.contribution7">
       <action
               label="Check JML"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckJML"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkJMLAction">
       </action>
    </objectContribution>
    <objectContribution
            adaptable="true"
            objectClass="org.eclipse.ui.IWorkingSet"
            nameFilter="*"
            id="JMLUI.contribution5WS">
       <action
               label="Check JML"
               class="org.jmlspecs.openjml.eclipse.PopupActions$CheckJML"
               menubarPath="JML"
               enablesFor="+"
               id="JMLUI.checkJMLActionWS">
       </action>
    </objectContribution>
  </extension>

<!-- These extensions add menu items to the menubar and toolbar -->
  <extension
         point="org.eclipse.ui.actionSets">
         <actionSet
            label="JML Actions"
            visible="true"
            id="org.jmlspecs.actionSet">
         <menu
               label="JML"
               id="JMLMenu">
            <separator
                  name="JMLGroup">
            </separator>
         </menu>
        
         <action
               label="Delete RAC class files"
               tooltip="Deletes RAC-compiled class files for selected resources"
               class="org.jmlspecs.openjml.eclipse.MenuActions$ClearForRAC"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.ClearForRAC"
               definitionId="org.jmlspecs.eclipse.commands.ClearForRAC">
         </action>
         <action
               label="Disable for RAC"
               tooltip="Disables selected resources from being compiled with runtime checks"
               class="org.jmlspecs.openjml.eclipse.MenuActions$DisableForRAC"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.DisableForRAC"
               definitionId="org.jmlspecs.eclipse.commands.DisableForRAC">
         </action>
         <action
               label="Enable for RAC"
               tooltip="Marks selected resources to be compiled with runtime checks"
               class="org.jmlspecs.openjml.eclipse.MenuActions$EnableForRAC"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.EnableForRAC"
               definitionId="org.jmlspecs.eclipse.commands.EnableForRAC">
         </action>
         <action
               label="Show counterexample value"
               tooltip="SHows the value of an expression in the counterexample"
               class="org.jmlspecs.openjml.eclipse.MenuActions$ShowCounterexampleValue"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.ShowCounterexampleValue"
                           definitionId="org.jmlspecs.eclipse.commands.ShowCounterexampleValue">
         </action>
         <action
               label="Generate JML doc"
               tooltip="Generates javadoc pages containing JML specifications"
               class="org.jmlspecs.openjml.eclipse.MenuActions$JmlDoc"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.JmlDoc"
                           definitionId="org.jmlspecs.eclipse.commands.JmlDoc">
         </action>
         <action
               label="Show Class Path"
               tooltip="Shows JML's class path"
               class="org.jmlspecs.openjml.eclipse.MenuActions$ClassPath"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.ClassPath"
                           definitionId="org.jmlspecs.eclipse.commands.ClassPath">
         </action>
         <action
               label="Edit Specs Path"
               tooltip="Edits the specifications directory path"
               class="org.jmlspecs.openjml.eclipse.MenuActions$SpecsPath"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.SpecsPath"
                           definitionId="org.jmlspecs.eclipse.commands.EditSpecsPath">
         </action>
         <action
               label="Remove from Specs Path"
               tooltip="Removes folder from the specifications directory path"
               class="org.jmlspecs.openjml.eclipse.MenuActions$RemoveFromSpecsPath"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.RemoveFromSpecsPath"
                           definitionId="org.jmlspecs.eclipse.commands.RemoveFromSpecsPath">
         </action>
         <action
               label="Add to Specs Path"
               tooltip="Adds folder to the specifications directory path"
               class="org.jmlspecs.openjml.eclipse.MenuActions$AddToSpecsPath"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.AddToSpecsPath"
                           definitionId="org.jmlspecs.eclipse.commands.AddToSpecsPath">
         </action>
         <action
               label="Show Specifications"
               tooltip="Shows the specifications of the selected object"
               class="org.jmlspecs.openjml.eclipse.MenuActions$ShowSpecs"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.ShowSpecs"
                           definitionId="org.jmlspecs.eclipse.commands.ShowSpecs">
         </action>
         <action
               label="Show Proof Information"
               tooltip="Shows proof information for the selected method"
               class="org.jmlspecs.openjml.eclipse.MenuActions$ProofInformation"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.ProofInformation"
                           definitionId="org.jmlspecs.eclipse.commands.ProofInformation">
         </action>
         <action
               label="Disable Auto JML Checking"
               tooltip="Disables selected objects for auto JML checking"
               class="org.jmlspecs.openjml.eclipse.MenuActions$DisableJML"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.DisableJML"
			   definitionId="org.jmlspecs.eclipse.commands.DisableJML">
         </action>
         <action
               label="Enable Auto JML Checking"
               tooltip="Enables selected objects for auto JML checking"
               class="org.jmlspecs.openjml.eclipse.MenuActions$EnableJML"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.EnableJML"
			   definitionId="org.jmlspecs.eclipse.commands.EnableJML">
         </action>
         <action
               label="Delete JML Markers"
               tooltip="Clears any JML markers in the selected object"
               class="org.jmlspecs.openjml.eclipse.MenuActions$DeleteMarkers"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.DeleteMarkers"
               definitionId="org.jmlspecs.eclipse.commands.DeleteJMLMarkers">
         </action>
         <action
               label="Open Specifications Editor"
               tooltip="Opens a specification file editor for the selected object"
               class="org.jmlspecs.openjml.eclipse.MenuActions$SpecsEditor"
               menubarPath="JMLMenu/JMLGroup"
               id="org.jmlspecs.openjml.eclipse.MenuActions.SpecsEditor"
               definitionId="org.jmlspecs.eclipse.commands.SpecsEditor">
         </action>
         <action
               label="RAC"
               tooltip="Compiles JML runtime checks for selected objects"
               class="org.jmlspecs.openjml.eclipse.MenuActions$RAC"
               menubarPath="JMLMenu/JMLGroup"
               toolbarPath="Normal/build.ext"
               id="org.jmlspecs.openjml.eclipse.MenuActions.RAC"
               definitionId="org.jmlspecs.eclipse.commands.RAC">
         </action>
         <action
               label="ESC"
               tooltip="Performs JML static checks for selected objects"
               class="org.jmlspecs.openjml.eclipse.MenuActions$CheckESC"
               menubarPath="JMLMenu/JMLGroup"
               toolbarPath="Normal/build.ext"
               id="org.jmlspecs.openjml.eclipse.MenuActions.CheckESC"
               definitionId="org.jmlspecs.eclipse.commands.CheckESC">
         </action>
         <action
               label="JML type-check"
               tooltip="Type-checks JML in selected objects"
               class="org.jmlspecs.openjml.eclipse.MenuActions$CheckJML"
               menubarPath="JMLMenu/JMLGroup"
               toolbarPath="Normal/build.ext"
               icon="icons/jml-logo-16x16.png"
               id="org.jmlspecs.openjml.eclipse.MenuActions.CheckJML"
               definitionId="org.jmlspecs.eclipse.commands.CheckJML">
         </action>
     </actionSet>
   </extension>
   
  <!-- This defines a new marker type -->
  <!-- The attribute is used to associate additional information with the marker -->  
  <extension
         id="JMLProblem"
         name="JML Problem"
         point="org.eclipse.core.resources.markers">
    <super type="org.eclipse.jdt.core.problem"/>
    <persistent value="true"/>
    <attribute name="declarationInfo"/>
  </extension>

  <extension
         id="JMLESCProblem"
         name="JML Static Check Problem"
         point="org.eclipse.core.resources.markers">
    <super type="org.eclipse.jdt.core.problem"/>
    <persistent value="true"/>
    <attribute name="declarationInfo"/>
  </extension>

<!-- FIXME - is the declarationInfo attribute actually used ? -->
	
  <!-- This connects the JML markers to editor annotations  -->
  <!--  NOTE: Per the code in Utils the marker type must
        be PLUGIN_ID + ".JMLProblem" or PLUGIN_ID + ".JMLESCProblem"
  -->
  <!-- Note: The type declarations used to have an attribute
  			super="org.eclipse.ui.workbench.texteditor.error"
  	   (there may be a corresponding one for warning as well).  With that
  	   used, the following annotations would show up in the preference
  	   page (General>>Editors>>TextEditors>>Annotations), but the display
  	   would not respond to changes in the preferences.  The super line
  	   needed to be removed for this behavior to get enabled.  I'm not
  	   actually sure what benefit the super attribute provides (and thus
  	   what functionality is broken by its removal. FIXME) -->
  				
  <extension
         point="org.eclipse.ui.editors.annotationTypes"
         id="JMLAnnotation">
    <type
            markerType="org.jmlspecs.OpenJMLUI.JMLESCProblem"
            name="org.jmlspecs.OpenJMLUI.ESCProblemAnnotation"
            markerSeverity="1"
            >
    </type>
    <type
            markerType="org.jmlspecs.OpenJMLUI.JMLProblem"
            name="org.jmlspecs.OpenJMLUI.JMLProblemAnnotation"
            markerSeverity="2"
            >
    </type>
    <type
            markerType="org.jmlspecs.OpenJMLUI.JMLProblem"
            name="org.jmlspecs.OpenJMLUI.JMLWarningAnnotation"
            markerSeverity="1"
                        >
    </type>
    <type
            markerType="org.jmlspecs.OpenJMLUI.JMLProblem"
            name="org.jmlspecs.OpenJMLUI.JMLNoteAnnotation"
            markerSeverity="0"
                        >
    </type>
  </extension>
            <!--super="org.eclipse.ui.workbench.texteditor.error"-->
            <!--super="org.eclipse.ui.workbench.texteditor.warn"-->
<!--
-->

  <!-- Provides the image for the annotations  -->
  <!-- NOTE: the annotationType must match the name, not the id, of the
  		annotationType defined above -->
  <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
    <specification
            icon="icons/jml_orange.gif"
            annotationType="org.jmlspecs.OpenJMLUI.ESCProblemAnnotation"
            label="JML Static Check Warning"
            overviewRulerPreferenceKey="org.jmlspecs.openjml.eclipse.orpeKey"
            verticalRulerPreferenceKey="org.jmlspecs.openjml.eclipse.vrpeKey"
            highlightPreferenceKey="org.jmlspecs.openjml.eclipse.hrpeKey"
            textPreferenceKey="org.jmlspecs.openjml.eclipse.trpeKey"
            colorPreferenceKey="org.jmlspecs.openjml.eclipse.crpeKey"
            colorPreferenceValue="255,128,0"
            textPreferenceValue="true"
            overviewRulerPreferenceValue="true"
            verticalRulerPreferenceValue="true"
            highlightPreferenceValue="true"
            presentationLayer="3"
            >
    </specification>
    <specification
            icon="icons/jml_problem.gif"
            annotationType="org.jmlspecs.OpenJMLUI.JMLProblemAnnotation"
            label="JML Error"
            overviewRulerPreferenceKey="org.jmlspecs.openjml.eclipse.orpKey"
            verticalRulerPreferenceKey="org.jmlspecs.openjml.eclipse.vrpKey"
            highlightPreferenceKey="org.jmlspecs.openjml.eclipse.hrpKey"
            textPreferenceKey="org.jmlspecs.openjml.eclipse.trpKey"
            colorPreferenceKey="org.jmlspecs.openjml.eclipse.crpKey"
            colorPreferenceValue="255,0,0"
            textPreferenceValue="true"
            overviewRulerPreferenceValue="true"
            verticalRulerPreferenceValue="true"
            highlightPreferenceValue="true"
            presentationLayer="3"
            >
    </specification>
    <specification
            icon="icons/jml_warning.gif"
            annotationType="org.jmlspecs.OpenJMLUI.JMLWarningAnnotation"
            label="JML Warning"
            overviewRulerPreferenceKey="org.jmlspecs.openjml.eclipse.orpwKey"
            verticalRulerPreferenceKey="org.jmlspecs.openjml.eclipse.vrpwKey"
            highlightPreferenceKey="org.jmlspecs.openjml.eclipse.hrpwKey"
            textPreferenceKey="org.jmlspecs.openjml.eclipse.trpwKey"
            colorPreferenceKey="org.jmlspecs.openjml.eclipse.crpwKey"
            colorPreferenceValue="255,255,0"
            textPreferenceValue="true"
            overviewRulerPreferenceValue="true"
            verticalRulerPreferenceValue="true"
            highlightPreferenceValue="true"
            presentationLayer="3"
            >
    </specification>
    <specification
            icon="icons/jml_blue.gif"
            annotationType="org.jmlspecs.OpenJMLUI.JMLNoteAnnotation"
            label="JML Note"
            overviewRulerPreferenceKey="org.jmlspecs.openjml.eclipse.orpnKey"
            verticalRulerPreferenceKey="org.jmlspecs.openjml.eclipse.vrpnKey"
            highlightPreferenceKey="org.jmlspecs.openjml.eclipse.hrpnKey"
            textPreferenceKey="org.jmlspecs.openjml.eclipse.trpnKey"
            colorPreferenceKey="org.jmlspecs.openjml.eclipse.crpnKey"
            colorPreferenceValue="0,0,255"
            textPreferenceValue="true"
            overviewRulerPreferenceValue="true"
            verticalRulerPreferenceValue="true"
            highlightPreferenceValue="true"
            presentationLayer="3"
            >
    </specification>
  </extension> 
 
 <!--  (TODO) This has to do with filters in the problems view - I have not tried it yet
    <extension point="org.eclipse.ui.ide.markerSupport">
  <problemFilter
    name = "Warnings"
    id = "org.eclipse.example.warningFilter"
    enabled = "true"
    scope="ON_SELECTED_AND_CHILDREN"
    onDescription="!NON-NLS"
    severity="WARNING"
  > 
  <selectedType
    markerId="org.jmlspecs.openjml.eclipse.JMLProblem"/>
  </problemFilter>
 </extension>
   --> 

<!-- The following creates commands that are referenced by
	actions above and can be mapped to keys -->      
	
  <extension
	point="org.eclipse.ui.commands">
      <category
            name="JML"
            description="JML related commands"
            id="org.jmlspecs.eclipse.JMLCommandCategory">
      </category>
      <command
            name="Enable JML Auto Checking"
            description="Enables JML automatic checking during compilation"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.EnableJML">
      </command> 
      <command
            name="Disable JML Auto Checking"
            description="Disables JML automatic checking during compilation"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.DisableJML">
      </command>
      <command
            name="TypeCheck JML"
            description="Manually type-checks JML constructs in selected resources"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.CheckJML">
      </command>
      <command
            name="Static Check (ESC)"
            description="Runs static checks on selected resources"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.CheckESC">
      </command>
      <command
            name="RAC - compile"
            description="Compiles runtime checks on selected resources"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.RAC">
      </command>
      <command
            name="RAC - enable file"
            description="Marks files to be compiled with RAC"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.EnableForRAC">
      </command>
      <command
            name="RAC - disable file"
            description="Disables files from being compiled with RAC"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.DisableForRAC">
      </command>
      <command
            name="RAC - delete all class files"
            description="Delete all RAC-compiled class files"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.ClearForRAC">
      </command>
      <command
            name="Delete JML Markers"
            description="Deletes the JML markers in selected resources"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.DeleteJMLMarkers">
      </command>
      <command
            name="Show JML Specifications"
            description="Show the specifications of selected resources in a popup"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.ShowSpecs">
      </command>
      <command
            name="Show JML Proof Information"
            description="Show proof information for the specified method"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.ProofInformation">
      </command>
      <command
            name="Show Counterexample Value"
            description="Show value of expression in counterexample"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.ShowCounterexampleValue">
      </command>
      <command
            name="Edit JML specs path"
            description="A wizard to edit the JML specifications directory path"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.EditSpecsPath">
      </command>
      <command
            name="Add to JML specs path"
            description="Adds a folder to the JML specifications directory path"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.AddToSpecsPath">
      </command>
      <command
            name="Remove from JML specs path"
            description="Removes a folder from the JML specifications directory path"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.RemoveFromSpecsPath">
      </command>
      <command
            name="Show JML class path"
            description="Shows JML's class path"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.ClassPath">
      </command>
      <command
            name="Generate JML doc"
            description="Generates javadoc pages containing JML information"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.JmlDoc">
      </command>
      <command
            name="Open a Specifications Editor"
            description="Opens an editor on the corresponding specifications file"
            categoryId="org.jmlspecs.eclipse.JMLCommandCategory"
            id="org.jmlspecs.eclipse.commands.SpecsEditor">
      </command>
  </extension>
  
   <!-- This extension adds help information.
   	-->
   <extension
         point="org.eclipse.help.toc">
      <toc file="html/JMLHelp.xml" primary="true" />
   </extension>
   
   <!-- file extensions - treats JML specs files as Java source and so use the
                Java editor -->
   
   <extension point="org.eclipse.core.contenttype.contentTypes"> 
      <file-association 
       content-type="org.eclipse.jdt.core.javaSource"
       file-extensions="spec,jml,refines-java,refines-spec,refines-jml"/>
   </extension>
   
   <!--  FIXME - this would define a new editor, but it is not implemented yet
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="org.jmlspecs.openjml.eclipse.JMLEditor"
            contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
            extensions="jml"
            icon="icons/sample.gif"
            id="org.jmlspecs.openjml.eclipse.JMLEditor"
            name="JML Editor"/>
   </extension>
   -->
   
<!-- TODO: RAC decorator, meant to indicate which files have RAC compiled in, but not implemented yet
    <extension point="org.eclipse.ui.decorators"> 
        <decorator
            id="org.jmlspecs.openjml.eclipse.racDecorator" 
            label="RAC" 
            state="false" 
            lightweight="true" 
            icon="icons/JMLSmall.png" 
            location="BOTTOM_RIGHT"> 
            <enablement>
                <and>
                <objectClass name="org.eclipse.core.resources.IFile"/>
                <objectState name="RAC" value="true"/>
                </and> 
            </enablement>
        </decorator>
    </extension>
    --> 
 
   
</plugin>
